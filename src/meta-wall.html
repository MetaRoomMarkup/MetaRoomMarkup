<link rel="import" href="meta-base.html">

<dom-module id="meta-wall">
  <template>
    <content></content>
  </template>

  <script>
    Polymer({
        is: 'meta-wall',

        properties: {
          metaVerse: Object,
          metaObject: Object,
          align: {
            type: String,
            // reflectToAttribute: true
            notify: true
          }
        },

        created: function(){
          var planeHeight = 20;
          var planeWidth = 20;
          var texture = THREE.ImageUtils.loadTexture(
            'img/box.png'
          );
          texture.wrapS = THREE.RepeatWrapping;
          texture.wrapT = THREE.RepeatWrapping;
          texture.repeat.set(planeHeight, planeWidth);

          var geometry = new THREE.PlaneGeometry(planeWidth, planeHeight,1,1);
          var material = new THREE.MeshBasicMaterial({
            map: texture,
            color: 0xffffff,
            side: THREE.DoubleSide
          });

          var mesh = new THREE.Mesh(geometry, material);
          this.metaObject = {
            mesh: mesh
          }
        },

        attached: function() {
          var mesh = this.metaObject.mesh;
          switch (this.align) {
            case 'left':
              mesh.rotation.y = 90 * (Math.PI/180);
              mesh.position.set(-5, 0, 0);
              break;
            case 'front':
              mesh.position.set(0, 0, -5);
              break;
            case 'back':
              mesh.position.set(0, 0, 5);
              break;
            case 'right':
              mesh.rotation.y = 90 * (Math.PI/180);
              mesh.position.set(5, 0, 0);
              break;
          }

          this.fire('meta-attached', {
            target: this
          });
        },

        detached: function() {
          this.metaVerse.fire('meta-detached', {
            target: this
          });
        }
    });
  </script>
</dom-module>
